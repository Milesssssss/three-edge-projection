let e,t,r,o,i,n,s,l,a,d,u;function p(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},g={},w={},m=f.parcelRequire6c98;null==m&&((m=function(e){if(e in g)return g[e].exports;if(e in w){var t=w[e];delete w[e];var r={id:e,exports:{}};return g[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){w[e]=t},f.parcelRequire6c98=m),m.register("27Lyk",function(e,t){p(e.exports,"register",()=>r,e=>r=e),p(e.exports,"resolve",()=>o,e=>o=e);var r,o,i={};r=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},o=function(e){var t=i[e];if(null==t)throw Error("Could not resolve bundle with id "+e);return t}}),m("27Lyk").register(JSON.parse('{"8QGS7":"silhouetteProjection.b08c1309.js","82ikj":"silhouetteAsync.worker.f555f2b4.js","bGZIs":"projectionAsync.worker.9c6d2a59.js","9UJIV":"silhouetteProjection.577d2f3c.js"}'));var c=m("ilwiq"),y=m("jiuw3"),h=m("5Rd1x"),b=m("7ePFa"),x=m("4CEV9"),c=m("ilwiq"),O=m("l7uOa");const v="SilhouetteGeneratorWorker";var k={},M={};M=function(e,t,r){if(t===self.location.origin)return e;var o=r?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([o],{type:"application/javascript"}))};let P=new URL(m("27Lyk").resolve("82ikj"),import.meta.url);k=M(P.toString(),P.origin,!0);class W{constructor(){this.running=!1,this.worker=new Worker(k),this.worker.onerror=e=>{if(e.message)throw Error(`${v}: Could not create Web Worker with error "${e.message}"`);throw Error(`${v}: Could not create Web Worker.`)}}generate(e,t={}){if(this.running)throw Error(`${v}: Already running job.`);if(null===this.worker)throw Error(`${v}: Worker has been disposed.`);let{worker:r}=this;return this.running=!0,new Promise((o,i)=>{r.onerror=e=>{i(Error(`${v}: ${e.message}`)),this.running=!1},r.onmessage=e=>{this.running=!1;let{data:n}=e;if(n.error)i(Error(n.error)),r.onmessage=null;else if(n.result){if(t.output===O.OUTPUT_BOTH){let e=n.result.map(e=>{let t=new c.BufferGeometry;return t.setAttribute("position",new c.BufferAttribute(e.position,3,!1)),e.index&&t.setIndex(new c.BufferAttribute(e.index,1,!1)),t});o(e)}else{let e=new c.BufferGeometry;e.setAttribute("position",new c.BufferAttribute(n.result.position,3,!1)),e.setIndex(new c.BufferAttribute(n.result.index,1,!1)),o(e)}r.onmessage=null}else t.onProgress&&t.onProgress(n.progress)};let n=e.index?e.index.array.slice():null,s=e.attributes.position.array.slice(),l=[s.buffer];n&&l.push(n.buffer),r.postMessage({index:n,position:s,options:{...t,onProgress:null,includedProgressCallback:!!t.onProgress}},l)})}dispose(){this.worker.terminate(),this.worker=null}}const S={displaySilhouette:!0,displayWireframe:!1,displayOutline:!1,displayModel:!0,useWorker:!1,rotate:()=>{l.quaternion.random(),l.position.set(0,0,0),l.updateMatrixWorld(!0);let e=new c.Box3;e.setFromObject(i,!0),e.getCenter(l.position).multiplyScalar(-1),l.position.y=Math.max(0,-e.min.y)+1},regenerate:()=>{T=j()}};let T=null;function*j(e=30){d.innerText="processing: --";let t=window.performance.now(),r=[];i.updateWorldMatrix(!0,!0),i.traverse(e=>{if(e.geometry){let t=e.geometry.clone();if(t.applyMatrix4(e.matrixWorld),t.morphTargetsRelative=!1,t.morphAttributes)for(let e in t.morphAttributes)delete t.morphAttributes[e];for(let e in t.attributes)"position"!==e&&t.deleteAttribute(e);r.push(t)}});let o=(0,b.mergeGeometries)(r,!1),l=window.performance.now()-t;yield,t=window.performance.now();let p=null;if(S.useWorker)for(u.generate(o,{output:x.OUTPUT_BOTH,onProgress:e=>{d.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`}}).then(e=>{p=e});null===p;)yield;else{let t=new x.SilhouetteGenerator;t.iterationTime=e,t.output=x.OUTPUT_BOTH;let r=t.generate(o,{onProgress:(e,t)=>{d.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`;let r=t.getGeometry();n.geometry.dispose(),n.geometry=r[0],s.geometry=r[0],a.geometry.dispose(),a.geometry=r[1],(S.displaySilhouette||S.displayWireframe||S.displayOutline)&&(n.geometry.dispose(),n.geometry=r[0],s.geometry=r[0],a.geometry.dispose(),a.geometry=r[1])}}),i=r.next();for(;!i.done;)i=r.next(),yield;p=i.value}let f=window.performance.now()-t;n.geometry.dispose(),n.geometry=p[0],s.geometry=p[0],a.geometry.dispose(),a.geometry=p[1],d.innerText=`merge geometry  : ${l.toFixed(2)}ms
edge trimming   : ${f.toFixed(2)}ms
triangles       : ${n.geometry.index.count/3} tris`}!async function(){d=document.getElementById("output"),(e=new c.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(15658734,1),document.body.appendChild(e.domElement),r=new c.Scene;let p=new c.DirectionalLight(16777215,3.5);p.position.set(1,2,3),r.add(p);let f=new c.AmbientLight(11583173,.5);r.add(f),(l=new c.Group).position.y=2,r.add(l),(i=new c.Mesh(new c.TorusKnotGeometry(1,.4,120,30),new c.MeshStandardMaterial({polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1}))).rotation.set(Math.PI/4,0,Math.PI/8),l.add(i),(n=new c.Mesh(void 0,new c.MeshBasicMaterial({color:15753874,side:c.DoubleSide,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1}))).position.y=-2,r.add(n),(a=new c.LineSegments(void 0,new c.LineBasicMaterial({color:0}))).position.y=-2,r.add(a),(s=new c.Mesh(void 0,new c.MeshBasicMaterial({color:12720219,wireframe:!0}))).position.y=-2,r.add(s),(t=new c.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,50)).position.setScalar(4.5),t.updateProjectionMatrix(),new h.OrbitControls(t,e.domElement),(o=new y.GUI).add(S,"displayModel"),o.add(S,"displaySilhouette"),o.add(S,"displayOutline"),o.add(S,"displayWireframe"),o.add(S,"useWorker"),o.add(S,"rotate"),o.add(S,"regenerate"),u=new W,T=j(),function o(){if(requestAnimationFrame(o),T){let e=T.next();e.done&&(T=null)}i.visible=S.displayModel,n.visible=S.displaySilhouette,s.visible=S.displayWireframe,a.visible=S.displayOutline,e.render(r,t)}(),window.addEventListener("resize",function(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)},!1)}();
//# sourceMappingURL=silhouetteProjection.b08c1309.js.map
