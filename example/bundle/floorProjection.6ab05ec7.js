let e,t,n,i,o,r,s,l,d,a;var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},u={},c={},g=p.parcelRequire6c98;null==g&&((g=function(e){if(e in u)return u[e].exports;if(e in c){var t=c[e];delete c[e];var n={id:e,exports:{}};return u[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){c[e]=t},p.parcelRequire6c98=g);var w=(g("ilwiq"),g("ilwiq")),m=g("5Rd1x");class f extends m.OrbitControls{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons={LEFT:w.MOUSE.PAN,MIDDLE:w.MOUSE.DOLLY,RIGHT:w.MOUSE.ROTATE},this.touches={ONE:w.TOUCH.PAN,TWO:w.TOUCH.DOLLY_ROTATE}}}var h=g("7lx9d"),y=g("7ePFa"),x=g("kp7Te"),b=g("4CEV9"),T=g("jiuw3");let v=null;const M={displayModel:!1,regenerate:()=>{v=O()}};function*O(){let e,t,n;a.innerText="processing: --",d.visible=!1,s.visible=!1;let i=[];r.updateWorldMatrix(!0,!0),r.traverse(e=>{if(e.geometry){let t=e.geometry.clone();if(t.applyMatrix4(e.matrixWorld),t.morphTargetsRelative=!1,t.morphAttributes)for(let e in t.morphAttributes)delete t.morphAttributes[e];for(let e in t.attributes)"position"!==e&&t.deleteAttribute(e);i.push(t)}});let o=(0,y.mergeGeometries)(i,!1);for(yield,(n=new b.SilhouetteGenerator).sortTriangles=!0,t=(e=n.generate(o,{onProgress:(e,t)=>{a.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`,d.geometry.dispose(),d.geometry=t.getGeometry(),d.visible=!0}})).next();!t.done;)t=e.next(),yield;for(d.geometry.dispose(),d.geometry=t.value,d.visible=!0,a.innerText="generating intersection edges...",(n=new b.ProjectionGenerator).angleThreshold=50,t=(e=n.generate(o,{onProgress:(e,t)=>{a.innerText=`processing: ${parseFloat((100*e).toFixed(2))}%`,s.geometry.dispose(),s.geometry=t.getLineGeometry(),s.visible=!0}})).next();!t.done;)t=e.next(),yield;s.geometry.dispose(),s.geometry=t.value,s.visible=!0,a.innerText=""}!async function(){a=document.getElementById("output"),(e=new w.WebGLRenderer({antialias:!0})).setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e.setClearColor(1118481,1),document.body.appendChild(e.domElement),n=new w.Scene;let p=new w.DirectionalLight(16777215,3.5);p.position.set(1,2,3),n.add(p);let u=new w.AmbientLight(11583173,.5);n.add(u),l=new w.Group,n.add(l);let c=await new(0,h.GLTFLoader)().setMeshoptDecoder(x.MeshoptDecoder).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/3d-home-layout/scene.glb");r=c.scene,l.updateMatrixWorld(!0);let g=new w.Box3;g.setFromObject(r,!0),g.getCenter(l.position).multiplyScalar(-1),l.position.y=Math.max(0,-g.min.y)+1,l.add(r),r.visible=!1,d=new w.Mesh(new w.BufferGeometry,new w.MeshBasicMaterial({color:"#eee",polygonOffset:!0,polygonOffsetFactor:3,polygonOffsetUnits:3,side:w.DoubleSide})),s=new w.LineSegments(new w.BufferGeometry,new w.LineBasicMaterial({color:197379})),n.add(s,d),(t=new w.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.01,50)).position.setScalar(5.5),t.updateProjectionMatrix(),(o=new f(t,e.domElement)).zoomToCursor=!0,o.maxPolarAngle=Math.PI/3,v=O(),(i=new T.GUI).add(M,"displayModel"),i.add(M,"regenerate"),function i(){if(requestAnimationFrame(i),v){let e=v.next();e.done&&(v=null)}r.visible=M.displayModel,e.render(n,t)}(),window.addEventListener("resize",function(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight)},!1)}();
//# sourceMappingURL=floorProjection.6ab05ec7.js.map
